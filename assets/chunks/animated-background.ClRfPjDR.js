import{ae as S,d as T,j as w,k as L,R as $,o as n,c as o,l as r,t as h,m as f,F as y,D as _,P as z,I as C,n as x,e as b,b as M,a9 as U}from"./framework.HokEyLHe.js";const B={title:"Releases",github:{owner:"vuejs",repo:"vitepress",token:"",releases:{feedType:"github",url:"/releases.json",size:20},pulls:{feedType:"github",url:"pulls.json",size:100},commits:{feedType:"github",url:"commits.json",size:200}},timeline:{paddingTop:.1,span:200},display:{release:{name:!0,username:!0,desc:!0,pulls:!0,commits:!0,hidePullUsername:!1,hideCommitUsername:!0,hideMergeCommits:!0,defaultOpenTab:"desc"}}},E=["href"],I={class:"avatar"},O=["src"],A={class:"username"},N=T({__name:"UserBadge",props:{username:{}},setup(t){return(i,e)=>(n(),o("a",{href:`https://github.com/${i.username}`,rel:"noopener noreferrer",target:"_blank",class:"user"},[r("span",I,[r("img",{src:`https://github.com/${i.username}.png`,alt:""},null,8,O)]),r("span",A,h(i.username),1)],8,E))}}),V={class:"issue-tabs"},F=["onClick"],P={key:0},R={class:"mobile-only tab-title"},q={class:"not-mobile-only tab-title"},Y=["innerHTML"],G=["href"],J=["innerHTML"],W={key:0},K=["href"],Q=["innerHTML"],X={key:0},Z=T({__name:"TimelineItemIssues",props:{release:{},options:{}},setup(t){const i=t,e=w(""),s=w(),a=w(0),d=[{name:"desc",title:"Desc",mobileTitle:"Desc",show:i.options.display.release.desc},{name:"pulls",title:"Pull Requests",mobileTitle:"Pulls",show:i.options.display.release.pulls},{name:"commits",title:"Commits",mobileTitle:"Commits",show:i.options.display.release.commits}];i.options.display.release.defaultOpenTab&&p(i.options.display.release.defaultOpenTab);function p(m){e.value=m===e.value?"":m,$(()=>{var v;a.value=(v=s.value)==null?void 0:v.scrollHeight})}return(m,v)=>(n(),o(y,null,[r("div",V,[(n(),o(y,null,_(d,l=>r("button",{key:l.name,class:x(["tab",{active:e.value===l.name}]),onClick:u=>p(l.name)},[l.show?(n(),o("span",P,[r("span",R,h(l.mobileTitle),1),r("span",q,h(l.title),1)])):b("",!0)],10,F)),64))]),r("div",{ref_key:"issuesSection",ref:s,class:x(["issues",e.value]),style:z({maxHeight:e.value===""?0:`${a.value}px`})},[m.release.desc?(n(),o("section",{key:0,class:x({open:e.value==="desc"})},[r("div",{class:"issue",innerHTML:m.release.desc},null,8,Y)],2)):b("",!0),r("section",{class:x({open:e.value==="pulls"})},[(n(!0),o(y,null,_(m.release.pulls,l=>(n(),o("div",{key:l.number,class:"issue-wrapper"},[r("a",{href:`https://github.com/${m.options.github.owner}/${m.options.github.repo}/pull/${l.number}`,rel:"noopener noreferrer",target:"_blank",class:"issue"},[r("p",null,[r("span",null," #"+h(l.number)+": ",1),r("span",{innerHTML:l.title},null,8,J),m.options.display.release.hidePullUsername?b("",!0):(n(),o("span",W," - @"+h(l.author),1))])],8,G)]))),128))],2),r("section",{class:x({open:e.value==="commits"})},[(n(!0),o(y,null,_(m.release.commits,l=>(n(),o("div",{key:l.url,class:"issue-wrapper"},[!m.options.display.release.hideMergeCommits||!l.title.startsWith("Merge ")?(n(),o("a",{key:0,href:l.url,rel:"noopener noreferrer",target:"_blank",class:"issue"},[r("p",null,[r("span",{innerHTML:l.title},null,8,Q),m.options.display.release.hideCommitUsername?b("",!0):(n(),o("span",X," - @"+h(l.author),1))])],8,K)):b("",!0)]))),128))],2)],6)],64))}}),ee={class:"timeline-item"},te=r("div",{class:"circle"},null,-1),ie={class:"content"},se=["datetime"],re=["href"],le={key:0,class:"release-name"},ne=T({__name:"TimelineItem",props:{release:{},options:{}},setup(t){function i(e){return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}return(e,s)=>(n(),o("div",ee,[te,r("div",ie,[r("time",{datetime:e.release.published_at},h(i(e.release.published_at)),9,se),r("a",{href:`https://github.com/${e.options.github.owner}/${e.options.github.repo}/releases/tag/${e.release.tag_name}`,rel:"noopener noreferrer",target:"_blank",class:"tag-name"},h(e.release.tag_name),9,re),e.options.display.release.name?(n(),o("h2",le,h(e.release.name),1)):b("",!0),e.options.display.release.username?(n(),M(N,{key:1,username:e.release.author},null,8,["username"])):b("",!0),C(Z,{release:e.release,options:e.options},null,8,["release","options"])])]))}});function ae(t,i){return t.getDate()===i.getDate()&&t.getMonth()===i.getMonth()&&t.getFullYear()===i.getFullYear()}function oe(t,i){const e=[],s=new Date(t);for(s.setHours(0,0);s<=i;)e.push(new Date(s)),s.setDate(s.getDate()+1);return e}async function me(t){let i={};const e=new Map;for(const u in["releases","pulls","commits"]){const c=["releases","pulls","commits"][u];let g;t.github[c].feedType==="github"?(g=`https://api.github.com/repos/${t.github.owner}/${t.github.repo}/${c}?per_page=${t.github[c].size}&state=closed`,t.github.token&&(i={Authorization:`token ${t.github.token}`})):g=t.github[c].url;const k=await fetch(g,{headers:i}).then(D=>D.json());e.set(c,k)}const s=e.get("releases"),a=e.get("pulls"),d=e.get("commits"),p=s[s.length-1],m=oe(new Date(p.published_at),new Date),v=new Date(s[0].published_at).getTime()-new Date(s[s.length-1].published_at).getTime(),l=new Set;return m.reverse().forEach(u=>{s.filter(c=>ae(new Date(c.published_at),u)).forEach(c=>{l.add({day:u,release:c})})}),[...l].map((u,c)=>{const g=new Date(u.release.published_at),k=c===s.length-1?new Date(1980,1):new Date(s[c+1].published_at),D=c===0?null:new Date(s[c-1].published_at),H=c===0?t.timeline.paddingTop:c<s.length-1?(D.getTime()-g.getTime())/v:0;return{day:u.day,release:{name:u.release.name,tag_name:u.release.tag_name,published_at:u.release.published_at,author:u.release.author.login,desc:ce(u.release.body),pulls:pe(k,g,a),commits:ue(k,g,d)},diff:H}})}function ce(t){if(!t)return"";t=t.replaceAll("</samp>","").replaceAll("<samp>","");const i=/\[([^\]]+)\]\(([^)]+)\)/g;t=t.replace(/</g,"&lt;").replace(/>/g,"&gt;"),t=t.replace(i,'<a href="$2" target="_blank">$1</a>');const e=/^(#+)\s(.+)/gm;return t=t.replace(e,(s,a,d)=>{const p=a.length;return`<h${p}>${d}</h${p}>`}),t=t.split(`\r
`).filter(s=>s).map(s=>s.trim()).join("</p><p>"),t}function pe(t,i,e){return e.filter(s=>{const a=new Date(s.closed_at);return a>=t&&a<=i}).map(s=>({title:s.title.replace(/[feat|chore|fix|refactor|docs|style|test|revert|bump](.*?)\:/,"<i>$&</i>"),number:s.number,author:s.user.login}))}function ue(t,i,e){return e.filter(s=>{const a=new Date(s.commit.author.date);return a>=t&&a<=i}).map(s=>({title:s.commit.message.replace(/[feat|chore|fix|refactor|docs|style|test|revert|bump](.*?)\:/,"<i>$&</i>"),url:s.html_url,author:s.author.login}))}function j(t,i){for(const e in i)typeof i[e]=="object"&&i[e]!==null&&!Array.isArray(i[e])?(e in t||(t[e]={}),j(t[e],i[e])):t[e]=i[e];return t}const de=r("div",{id:"stars",class:"bg-stars"},null,-1),he=r("div",{id:"stars2",class:"bg-stars"},null,-1),ge=r("div",{id:"stars3",class:"bg-stars"},null,-1),be={class:"header"},fe=["href"],xe=U('<div class="github-link"><div class="github-icon" aria-hidden="true"><svg width="24" height="24" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><path fill="currentColor" d="M16 .396c-8.839 0-16 7.167-16 16c0 7.073 4.584 13.068 10.937 15.183c.803.151 1.093-.344 1.093-.772c0-.38-.009-1.385-.015-2.719c-4.453.964-5.391-2.151-5.391-2.151c-.729-1.844-1.781-2.339-1.781-2.339c-1.448-.989.115-.968.115-.968c1.604.109 2.448 1.645 2.448 1.645c1.427 2.448 3.744 1.74 4.661 1.328c.14-1.031.557-1.74 1.011-2.135c-3.552-.401-7.287-1.776-7.287-7.907c0-1.751.62-3.177 1.645-4.297c-.177-.401-.719-2.031.141-4.235c0 0 1.339-.427 4.4 1.641a15.436 15.436 0 0 1 4-.541c1.36.009 2.719.187 4 .541c3.043-2.068 4.381-1.641 4.381-1.641c.859 2.204.317 3.833.161 4.235c1.015 1.12 1.635 2.547 1.635 4.297c0 6.145-3.74 7.5-7.296 7.891c.556.479 1.077 1.464 1.077 2.959c0 2.14-.02 3.864-.02 4.385c0 .416.28.916 1.104.755c6.4-2.093 10.979-8.093 10.979-15.156c0-8.833-7.161-16-16-16z"></path></svg></div><div class="github-title">View on GitHub</div></div>',1),ve=[xe],ye={class:"timeline"},we=r("div",{class:"line"},null,-1),ke=T({__name:"ReleaseTimeline",props:{options:{}},setup(t){const i=j(B,t.options),e=w(),s=w();return L(async()=>{e.value=await me(i);const a=new IntersectionObserver(d=>{d.forEach(p=>{p.isIntersecting&&(p.target.style.opacity="1")})},{threshold:.5});$(()=>{s.value.querySelectorAll(".timeline .rt-tr-el").forEach(d=>{a.observe(d)})})}),(a,d)=>(n(),o("section",{ref_key:"root",ref:s,class:"release-timeline"},[de,he,ge,r("header",be,[r("h1",null,h(f(i).title),1),r("a",{href:`https://github.com/${f(i).github.owner}/${f(i).github.repo}/releases`,rel:"noopener noreferrer",target:"_blank"},ve,8,fe)]),r("div",ye,[(n(!0),o(y,null,_(e.value,(p,m)=>(n(),o("section",{key:p.day.getUTCDate(),class:"timeline-record rt-tr-el",style:z({paddingTop:`${p.diff*f(i).timeline.span}px`})},[we,C(ne,{release:p.release,options:f(i),class:x(m%2===1?"left":"right")},null,8,["release","options","class"])],4))),128))])],512))}}),_e=".release-timeline .user{display:inline-flex;align-items:center;width:fit-content;padding:2px 4px 2px 0;font-weight:500;font-size:.75rem;line-height:1rem}.release-timeline .user .avatar{border-radius:9999px;width:1rem;height:1rem;border:1px solid var(--rt-c-border)}.release-timeline .user .avatar img{border-radius:9999px;width:1rem}.release-timeline .user .username{padding:0 0 2px 6px}.release-timeline .timeline-item{display:flex;gap:1.5rem;align-items:flex-start;margin-left:-9px;transform:translate(50%);width:50%;position:relative}.release-timeline .timeline-item.left{transform:translate(-50%);flex-direction:row-reverse;margin-left:9px}.release-timeline .timeline-item.left .content{align-items:flex-end}.release-timeline .timeline-item.left .release-name{text-align:end}.release-timeline .timeline-item .circle{border:1px solid var(--rt-c-border);border-radius:9999px;flex-shrink:0;width:8px;height:8px;margin-top:.5rem;box-shadow:var(--rt-c-text-2) 0 0 3px 1px;background-color:var(--rt-c-circle-bg)}.release-timeline .timeline-item .content{display:flex;flex-direction:column}.release-timeline .timeline-item .content time{font-weight:600;font-size:.8rem;line-height:1.5rem;color:var(--rt-c-text-3)}.release-timeline .timeline-item .content .tag-name{color:var(--rt-c-brand-1);width:fit-content;font-weight:700;font-size:1.4rem;line-height:2rem;margin-top:.5rem;transition:all .2s ease-in}.release-timeline .timeline-item .content .tag-name:hover{color:var(--rt-c-brand-2)}.release-timeline .timeline-item .content .release-name{margin:3px 0;padding-top:0;border-top:1px solid var(--rt-c-border);color:var(--rt-c-text-2);font-size:1.15rem;font-weight:600;letter-spacing:.03em;line-height:1.4rem}.release-timeline .timeline-item .content .issue-tabs{display:flex;gap:.6rem}.release-timeline a{text-decoration:none;color:var(--rt-c-brand-1)}.release-timeline .issues h1,.release-timeline .issues h2,.release-timeline .issues h3,.release-timeline .issues h4,.release-timeline .issues h5,.release-timeline .issues h6{margin:7px 0 10px;border-top:none;padding:0}.release-timeline .issue p{margin:5px 0 3px;line-height:.9rem}.release-timeline .commits .issue p,.release-timeline .pulls .issue p{margin:1px 0 0}.release-timeline .tab{text-wrap:nowrap;background-color:inherit;color:var(--rt-c-text-3);cursor:pointer;padding:2px 5px;text-align:left;border:solid 1px var(--rt-c-border);border-radius:3px;transition:.4s;margin:7px 7px 0 0;font-size:.7rem;text-transform:lowercase;letter-spacing:.3px;font-weight:400;line-height:.8rem}.release-timeline .tab.active,.release-timeline .tab:hover{color:var(--rt-c-text-2);border-color:var(--rt-c-text-2);background-color:var(--rt-c-bg-alt)}.release-timeline .issues{padding-top:5px;background-color:var(--rt-c-bg-issues);overflow:hidden;max-height:0;transition:max-height .6s ease-in-out,opacity .4s ease-in-out}.release-timeline .issues section{opacity:0;display:none;transition:max-height .4s ease-in-out,opacity .4s ease-in-out}.release-timeline .issues section.open{opacity:1;display:block;transition:max-height .4s ease-in-out,opacity .4s ease-in-out}.release-timeline .issues .issue{font-size:.8rem;letter-spacing:-.3px;color:var(--rt-c-text-2);line-height:.8rem;display:block;border-style:dashed;border-width:1px;padding:3px 4px;border-color:var(--rt-c-border);margin-top:5px;font-weight:400}.release-timeline .issues .issue h1{font-size:1.2rem}.release-timeline .issues .issue h2{font-size:1.05rem}.release-timeline .issues .issue h3{font-size:1rem}.dark{background-color:var(--rt-c-bg-alt)}.release-timeline{position:relative;display:flex;flex-direction:column;justify-content:center;font-family:var(--rt-font-family-base);background-color:var(--rt-c-bg);min-height:100vh}.release-timeline .header{text-align:center;margin-bottom:1rem}.release-timeline .header h1{color:var(--rt-c-text-2);margin-bottom:.9rem}.release-timeline .header a{width:fit-content;display:block;margin:auto;text-decoration:none}.release-timeline .header a .github-link{display:flex;border:1px solid var(--rt-c-border);border-radius:.3rem;padding:8px;width:fit-content;color:var(--rt-c-text-2);font-size:.9rem;font-weight:600;transition:color .3s ease-in-out}.release-timeline .header a .github-link .github-icon{margin-right:.6em;display:flex}.release-timeline .header a .github-link:hover{color:var(--rt-c-text-1)}.release-timeline .timeline .timeline-record{padding-bottom:.75rem;padding-top:.75rem;justify-content:center;align-items:center;min-height:24px;display:flex;position:relative;opacity:.2;transition:opacity 1.2s ease}.release-timeline .timeline .timeline-record .line{background-color:var(--rt-c-text-3);flex-shrink:0;width:.125rem;height:100%;margin-left:-1px;top:0;left:50%;right:50%;position:absolute}.release-timeline .mobile-only{display:none}@media screen and (max-width: 440px){.release-timeline .mobile-only{display:initial}.release-timeline .not-mobile-only{display:none}.issues{margin-left:-20px}.left .issues{margin-right:-20px;text-align:right}}",Te=(t,i)=>{const e=t.__vccOpts||t;for(const[s,a]of i)e[s]=a;return e},De={__name:"ReleaseTimeline.ce",props:{options:String},setup(t){let i=window.rt_options;return i||(i=JSON.parse(props.options)),(e,s)=>(n(),M(ke,{options:f(i)},null,8,["options"]))}},$e=Te(De,[["styles",[_e]]]);globalThis.window&&window.customElements.define("release-timeline",S($e));export{ke as H,B as j};
